<div class="component-header">
  <h2>Broker Management</h2>
  <em>Create and manage MQTT brokers</em>
</div>
<div class="component-body">
  <form [formGroup]="form" (ngSubmit)="submit()">
    <h4>Edit Broker</h4>
    <div class="row my-4">
      <div class="col-4">
        <div class="form-outline">
          <input type="text" name="host" formControlName="host" class="form-control" />
          <label class="form-label required mt-2" for="host">Host</label>
        </div>
      </div>
      <app-field-error-display
        [displayError]="isFieldValid('host')"
        errorMsg="Host name/IP required">
      </app-field-error-display>
    </div>

    <div class="row my-4">
      <div class="col-4">
        <div class="form-outline">
          <input type="number" name="port" formControlName="port" class="form-control" />
          <label class="form-label required mt-2" for="port">Port</label>
        </div>
      </div>
      <app-field-error-display
        [displayError]="isFieldValid('port')"
        errorMsg="Port require">
      </app-field-error-display>
    </div>

    <div class="row my-4">
      <div class="col-4">
        <div class="form-outline">
          <input type="number" name="webSocketsPort" formControlName="webSocketsPort" class="form-control"/>
          <label class="form-label mt-2" for="webSocketsPort">WebSockets Port</label>
        </div>
      </div>
    </div>

    <div class="row my-4">
      <div class="col-4">
        <div class="form-outline">
          <input type="text" name="username" formControlName="username" class="form-control" />
          <label class="form-label mt-2" for="username">Username</label>
        </div>
      </div>
    </div>

    <div class="row my-4">
      <div class="col-4">
        <div class="form-outline">
          <input type="password" name="password" formControlName="password" class="form-control" />
          <label class="form-label mt-2" for="password">Password</label>
        </div>
      </div>
    </div>

    <div class="row my-4">
      <div class="col-4">
        <div class="form-outline">
          <input type="checkbox" formControlName="useTls" [checked]="shouldUseTls" (onChange)="onUseTlsCheckChanged($event)"><br />
          <label class="form-label mt-2" for="useTls">Use TLS</label>
        </div>
      </div>
    </div>

    <div class="row my-4">
      <div class="col-4">
        <div class="form-outline">
          <input type="number" name="keepAliveSeconds" formControlName="keepAliveSeconds" class="form-control" />
          <label class="form-label mt-2" for="keepAliveSeconds">Keep Alive Seconds</label>
        </div>
      </div>
    </div>

    <div class="row my-4">
      <div class="col-4">
        <div class="form-outline">
          <input type="text" name="discoveryTopic" formControlName="discoveryTopic" class="form-control" />
          <label class="form-label mt-2" for="discoveryTopic">Discovery Topic</label>
        </div>
      </div>
    </div>

    <div class="row my-4">
      <div class="col-4">
        <button *ngIf="!submitted && !saved" type="submit" class="btn create">Save</button>
        <button *ngIf="!submitted" type="button" class="btn btn-danger" (click)="onBackClick()">Cancel</button>
      </div>
    </div>
  </form>
</div>
